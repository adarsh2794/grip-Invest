{"ast":null,"code":"import { observable, computed, action, makeObservable } from 'mobx';\nimport axios from 'axios';\n/**\n * Note 'axios' is a web client that will call the relevant apis which is defined in api.js\n */\n\nexport class CRMStores {\n  constructor() {\n    this.clients = [];\n    this.owners = [\"SKODA\", \"YAMAHA\", \"VOLVO\"];\n    this.emailTypes = [];\n    this.chartsData = [];\n    makeObservable(this, {\n      clients: observable,\n      owners: observable,\n      emailTypes: observable,\n      getClients: action,\n      getOwners: action,\n      addClient: action,\n      newClients: computed,\n      getBudgetsData: action,\n      getChartsData: action,\n      chartsData: observable\n    });\n  }\n  /**\n   * This is called by Client.js on useEffect function so that it fetches the client data and sets in the\n   * global varibale of this class\n   */\n\n\n  async getClients() {\n    let data = await axios.get(\"http://localhost:3002/clients\");\n    console.log(\"Successfully data derived\", data);\n    this.clients = data.data;\n  }\n\n  async getOwners() {\n    this.owners = [\"SKODA\", \"YAMAHA\", \"VOLVO\"];\n  }\n\n  async getEmailTypes() {\n    let data = await axios.get(\"http://localhost:3002/email\");\n    this.emailTypes = data.data[0];\n  }\n\n  async getHottestCountry() {\n    let data = await axios.get(\"http://localhost:3002/hottestCountry\");\n    return data.data.category;\n  }\n\n  async addClient(newClient) {\n    await axios.post('http://localhost:3002/client', newClient);\n    this.getClients();\n  }\n\n  async updateEmailType(name, newType) {\n    await axios.put(`http://localhost:3002/client/${name}`, newType);\n    this.getClients();\n  }\n\n  async updateOwner(name, newOwner) {\n    await axios.put(`http://localhost:3002/client/${name}`, newOwner);\n    this.getClients();\n  }\n\n  async updateSold(name, newValue) {\n    await axios.put(`http://localhost:3002/client/${name}`, newValue);\n    this.getClients();\n  }\n\n  get newClients() {\n    const currentDate = new Date().toLocaleDateString();\n    const newClientsList = this.clients.filter(c => c.date.slice(1)[0] == currentDate[0] && c.date.slice(6) == currentDate.slice(5));\n    return newClientsList.length;\n  }\n\n  get emailsSent() {\n    return this.clients.filter(c => c.email_type !== null).length;\n  }\n\n  get outstandingClients() {\n    return this.clients.filter(c => c.sold == 0).length;\n  }\n\n  async getBudgetsData() {\n    let data = await this.getHottestCountry();\n    const newClients = {\n      value: this.newClients,\n      title: 'New Clients this Month',\n      icon: 'faChartLine',\n      color: 'green'\n    };\n    const emailsSent = {\n      value: this.emailsSent,\n      title: 'Emails Sent',\n      icon: 'faEnvelope',\n      color: 'blue'\n    };\n    const outStandingClients = {\n      value: this.outstandingClients,\n      title: 'Outstanding Clients',\n      icon: 'faUserCircle',\n      color: 'red'\n    };\n    const hottestCountry = {\n      value: data,\n      title: 'Hottest Country',\n      icon: 'faGlobeAmericas',\n      color: 'yellow'\n    };\n    const budgetsData = [newClients, emailsSent, outStandingClients, hottestCountry];\n    return budgetsData;\n  }\n\n  async getChartsData() {\n    let data = await axios.get(\"http://localhost:3002/chartsData\");\n    console.log(data.data);\n    this.chartsData = data.data;\n  }\n\n}","map":{"version":3,"sources":["/home/adarsh/Desktop/Companies/crm/src/stores/CRMStores.js"],"names":["observable","computed","action","makeObservable","axios","CRMStores","constructor","clients","owners","emailTypes","chartsData","getClients","getOwners","addClient","newClients","getBudgetsData","getChartsData","data","get","console","log","getEmailTypes","getHottestCountry","category","newClient","post","updateEmailType","name","newType","put","updateOwner","newOwner","updateSold","newValue","currentDate","Date","toLocaleDateString","newClientsList","filter","c","date","slice","length","emailsSent","email_type","outstandingClients","sold","value","title","icon","color","outStandingClients","hottestCountry","budgetsData"],"mappings":"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","sourcesContent":["import { observable, computed, action, makeObservable } from 'mobx'\nimport axios from 'axios'\n\n/**\n * Note 'axios' is a web client that will call the relevant apis which is defined in api.js\n */\n\nexport class CRMStores {\n    constructor() {\n        this.clients = []\n        this.owners =  [\"SKODA\",\"YAMAHA\",\"VOLVO\"]\n        this.emailTypes = []\n        this.chartsData = []\n\n        makeObservable(this, {\n            clients: observable,\n            owners: observable,\n            emailTypes: observable,\n            getClients: action,\n            getOwners: action,\n            addClient: action,\n            newClients: computed,\n            getBudgetsData: action,\n            getChartsData: action,\n            chartsData: observable\n\n        })\n    }\n    /**\n     * This is called by Client.js on useEffect function so that it fetches the client data and sets in the\n     * global varibale of this class\n     */\n    async getClients() {\n        let data = await axios.get(\"http://localhost:3002/clients\")\n        console.log(\"Successfully data derived\",data);\n        this.clients = data.data;\n    }\n    async getOwners() {\n        this.owners = [\"SKODA\",\"YAMAHA\",\"VOLVO\"]\n    }\n\n    async getEmailTypes() {\n        let data = await axios.get(\"http://localhost:3002/email\")\n        this.emailTypes = data.data[0]\n    }\n\n    async getHottestCountry() {\n        let data = await axios.get(\"http://localhost:3002/hottestCountry\")\n        return data.data.category\n    }\n\n    async addClient(newClient) {\n        await axios.post('http://localhost:3002/client', newClient)\n        this.getClients()\n    }\n    async updateEmailType(name, newType) {\n        await axios.put(`http://localhost:3002/client/${name}`, newType)\n        this.getClients()\n    }\n\n    async updateOwner(name, newOwner) {\n        await axios.put(`http://localhost:3002/client/${name}`, newOwner)\n        this.getClients()\n    }\n\n    async updateSold(name, newValue) {\n        await axios.put(`http://localhost:3002/client/${name}`, newValue)\n        this.getClients()\n    }\n\n    get newClients() {\n        const currentDate = new Date().toLocaleDateString()\n        const newClientsList = this.clients.filter(c => c.date.slice(1)[0] == currentDate[0] && c.date.slice(6) == currentDate.slice(5))\n        return newClientsList.length\n    }\n\n    get emailsSent() {\n        return this.clients.filter(c => c.email_type !== null).length\n    }\n\n    get outstandingClients() {\n        return this.clients.filter(c => c.sold == 0).length\n    }\n\n    async getBudgetsData() {\n        let data = await this.getHottestCountry()\n        const newClients = { value: this.newClients, title: 'New Clients this Month', icon: 'faChartLine', color: 'green' }\n        const emailsSent = { value: this.emailsSent, title: 'Emails Sent', icon: 'faEnvelope', color: 'blue' }\n        const outStandingClients = { value: this.outstandingClients, title: 'Outstanding Clients', icon: 'faUserCircle', color: 'red' }\n        const hottestCountry = { value: data, title: 'Hottest Country', icon: 'faGlobeAmericas', color: 'yellow' }\n        const budgetsData = [newClients, emailsSent, outStandingClients, hottestCountry]\n        return budgetsData\n    }\n\n    async getChartsData() {\n        let data = await axios.get(\"http://localhost:3002/chartsData\")\n        console.log(data.data);\n        this.chartsData = data.data\n    }\n   \n}\n\n"]},"metadata":{},"sourceType":"module"}