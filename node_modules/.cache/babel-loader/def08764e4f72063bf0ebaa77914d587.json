{"ast":null,"code":"import { observable, computed, action, makeObservable } from 'mobx';\nimport axios from 'axios';\n/**\n * Note 'axios' is a web client that will call the relevant apis which is defined in api.js\n */\n\nexport class CRMStores {\n  constructor() {\n    this.clients = [];\n    this.owners = [\"SKODA\", \"YAMAHA\", \"VOLVO\"];\n    this.assetType = [\"CAR\", \"BIKE\", \"BUS\"];\n    this.searchParamters = this.getSearchParameters();\n    makeObservable(this, {\n      clients: observable,\n      owners: observable,\n      assetType: observable,\n      getClients: action,\n      getOwners: action,\n      addClient: action,\n      newClients: computed,\n      searchParamters: observable\n    });\n  }\n  /**\n   * This is called by Client.js on useEffect function so that it fetches the client data and sets in the\n   * global varibale of this class\n   */\n\n\n  async getClients() {\n    let data = await axios.get(\"http://localhost:3002/clients\");\n    console.log(\"Successfully data derived\", data);\n    this.clients = data.data;\n  }\n\n  getSearchParameters() {\n    let searchObj = [];\n    this.owners.forEach(owner => {\n      searchObj.push({\n        key: \"Owner\",\n        \"value\": owner\n      });\n    });\n    this.assetType.forEach(asset => {\n      searchObj.push({\n        key: \"Asset Type\",\n        \"value\": asset,\n        ...searchObj\n      });\n    });\n    return searchObj;\n  }\n\n  async getOwners() {\n    this.owners = [\"SKODA\", \"YAMAHA\", \"VOLVO\"];\n  }\n\n  async getEmailTypes() {\n    let data = await axios.get(\"http://localhost:3002/email\");\n    this.emailTypes = data.data[0];\n  }\n\n  async getHottestCountry() {\n    let data = await axios.get(\"http://localhost:3002/hottestCountry\");\n    return data.data.category;\n  }\n\n  async addClient(newClient) {\n    await axios.post('http://localhost:3002/client', newClient);\n    this.getClients();\n  }\n\n  async updateEmailType(name, newType) {\n    await axios.put(`http://localhost:3002/client/${name}`, newType);\n    this.getClients();\n  }\n\n  async updateOwner(name, newOwner) {\n    await axios.put(`http://localhost:3002/client/${name}`, newOwner);\n    this.getClients();\n  }\n\n  async updateSold(name, newValue) {\n    await axios.put(`http://localhost:3002/client/${name}`, newValue);\n    this.getClients();\n  }\n\n  get newClients() {\n    const currentDate = new Date().toLocaleDateString();\n    const newClientsList = this.clients.filter(c => c.date.slice(1)[0] == currentDate[0] && c.date.slice(6) == currentDate.slice(5));\n    return newClientsList.length;\n  }\n\n  get emailsSent() {\n    return this.clients.filter(c => c.email_type !== null).length;\n  }\n\n  get outstandingClients() {\n    return this.clients.filter(c => c.sold == 0).length;\n  }\n\n  async getBudgetsData() {\n    let data = await this.getHottestCountry();\n    const newClients = {\n      value: this.newClients,\n      title: 'New Clients this Month',\n      icon: 'faChartLine',\n      color: 'green'\n    };\n    const emailsSent = {\n      value: this.emailsSent,\n      title: 'Emails Sent',\n      icon: 'faEnvelope',\n      color: 'blue'\n    };\n    const outStandingClients = {\n      value: this.outstandingClients,\n      title: 'Outstanding Clients',\n      icon: 'faUserCircle',\n      color: 'red'\n    };\n    const hottestCountry = {\n      value: data,\n      title: 'Hottest Country',\n      icon: 'faGlobeAmericas',\n      color: 'yellow'\n    };\n    const budgetsData = [newClients, emailsSent, outStandingClients, hottestCountry];\n    return budgetsData;\n  }\n\n  async getChartsData() {\n    let data = await axios.get(\"http://localhost:3002/chartsData\");\n    console.log(data.data);\n    this.chartsData = data.data;\n  }\n\n}","map":{"version":3,"sources":["/home/adarsh/Desktop/Companies/crm/src/stores/CRMStores.js"],"names":["observable","computed","action","makeObservable","axios","CRMStores","constructor","clients","owners","assetType","searchParamters","getSearchParameters","getClients","getOwners","addClient","newClients","data","get","console","log","searchObj","forEach","owner","push","key","asset","getEmailTypes","emailTypes","getHottestCountry","category","newClient","post","updateEmailType","name","newType","put","updateOwner","newOwner","updateSold","newValue","currentDate","Date","toLocaleDateString","newClientsList","filter","c","date","slice","length","emailsSent","email_type","outstandingClients","sold","getBudgetsData","value","title","icon","color","outStandingClients","hottestCountry","budgetsData","getChartsData","chartsData"],"mappings":"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","sourcesContent":["import { observable, computed, action, makeObservable } from 'mobx'\nimport axios from 'axios'\n\n/**\n * Note 'axios' is a web client that will call the relevant apis which is defined in api.js\n */\n\nexport class CRMStores {\n    constructor() {\n        this.clients = []\n        this.owners =  [\"SKODA\",\"YAMAHA\",\"VOLVO\"]\n        this.assetType = [\"CAR\",\"BIKE\",\"BUS\"]\n        this.searchParamters = this.getSearchParameters()\n\n        makeObservable(this, {\n            clients: observable,\n            owners: observable,\n            assetType: observable,\n            getClients: action,\n            getOwners: action,\n            addClient: action,\n            newClients: computed,\n            searchParamters:observable\n\n        })\n    }\n    /**\n     * This is called by Client.js on useEffect function so that it fetches the client data and sets in the\n     * global varibale of this class\n     */\n    async getClients() {\n        let data = await axios.get(\"http://localhost:3002/clients\")\n        console.log(\"Successfully data derived\",data);\n        this.clients = data.data;\n    }\n    getSearchParameters()\n    {\n        let searchObj = [];\n        this.owners.forEach((owner)=>{\n            searchObj.push({key:\"Owner\",\"value\":owner})\n        })\n        this.assetType.forEach((asset)=>{\n            searchObj.push({key:\"Asset Type\",\"value\":asset,...searchObj})\n        })\n       return searchObj;\n    }\n    async getOwners() {\n        this.owners = [\"SKODA\",\"YAMAHA\",\"VOLVO\"]\n    }\n\n    async getEmailTypes() {\n        let data = await axios.get(\"http://localhost:3002/email\")\n        this.emailTypes = data.data[0]\n    }\n\n    async getHottestCountry() {\n        let data = await axios.get(\"http://localhost:3002/hottestCountry\")\n        return data.data.category\n    }\n\n    async addClient(newClient) {\n        await axios.post('http://localhost:3002/client', newClient)\n        this.getClients()\n    }\n    async updateEmailType(name, newType) {\n        await axios.put(`http://localhost:3002/client/${name}`, newType)\n        this.getClients()\n    }\n\n    async updateOwner(name, newOwner) {\n        await axios.put(`http://localhost:3002/client/${name}`, newOwner)\n        this.getClients()\n    }\n\n    async updateSold(name, newValue) {\n        await axios.put(`http://localhost:3002/client/${name}`, newValue)\n        this.getClients()\n    }\n\n    get newClients() {\n        const currentDate = new Date().toLocaleDateString()\n        const newClientsList = this.clients.filter(c => c.date.slice(1)[0] == currentDate[0] && c.date.slice(6) == currentDate.slice(5))\n        return newClientsList.length\n    }\n\n    get emailsSent() {\n        return this.clients.filter(c => c.email_type !== null).length\n    }\n\n    get outstandingClients() {\n        return this.clients.filter(c => c.sold == 0).length\n    }\n\n    async getBudgetsData() {\n        let data = await this.getHottestCountry()\n        const newClients = { value: this.newClients, title: 'New Clients this Month', icon: 'faChartLine', color: 'green' }\n        const emailsSent = { value: this.emailsSent, title: 'Emails Sent', icon: 'faEnvelope', color: 'blue' }\n        const outStandingClients = { value: this.outstandingClients, title: 'Outstanding Clients', icon: 'faUserCircle', color: 'red' }\n        const hottestCountry = { value: data, title: 'Hottest Country', icon: 'faGlobeAmericas', color: 'yellow' }\n        const budgetsData = [newClients, emailsSent, outStandingClients, hottestCountry]\n        return budgetsData\n    }\n\n    async getChartsData() {\n        let data = await axios.get(\"http://localhost:3002/chartsData\")\n        console.log(data.data);\n        this.chartsData = data.data\n    }\n   \n}\n\n"]},"metadata":{},"sourceType":"module"}